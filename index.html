<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="DÃ©monstration complÃ¨te HTML5 avec toutes fonctionnalitÃ©s natives">
  <title>Ultimate HTML5 Showcase - Tests Complets</title>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: #333;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      overflow: hidden;
    }
    
    header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 40px;
      text-align: center;
    }
    
    header h1 {
      font-size: 3em;
      margin-bottom: 10px;
    }
    
    nav {
      background: #2c3e50;
      padding: 15px;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    
    nav ul {
      list-style: none;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
    }
    
    nav a {
      color: white;
      text-decoration: none;
      padding: 10px 20px;
      border-radius: 5px;
      transition: all 0.3s;
    }
    
    nav a:hover {
      background: #667eea;
    }
    
    main {
      padding: 40px;
    }
    
    section {
      margin-bottom: 60px;
      padding: 30px;
      background: #f8f9fa;
      border-radius: 15px;
      border-left: 5px solid #667eea;
    }
    
    section h2 {
      color: #667eea;
      font-size: 2em;
      margin-bottom: 20px;
    }
    
    .feature-box {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      margin-top: 20px;
    }
    
    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 15px 30px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }
    
    textarea {
      width: 100%;
      min-height: 500px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 20px;
      border: 2px solid #667eea;
      border-radius: 10px;
      resize: vertical;
      line-height: 1.6;
    }
    
    progress {
      width: 100%;
      height: 30px;
      border-radius: 15px;
      appearance: none;
    }
    
    progress::-webkit-progress-bar {
      background: #e0e0e0;
      border-radius: 15px;
    }
    
    progress::-webkit-progress-value {
      background: linear-gradient(90deg, #667eea, #764ba2);
      border-radius: 15px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸš€ Ultimate HTML5 Showcase</h1>
      <p>Tests Automatiques Complets</p>
    </header>

    <nav>
      <ul>
        <li><a href="#tests">ğŸ§ª Tests Auto</a></li>
      </ul>
    </nav>

    <main>
      <section id="tests">
        <h2>ğŸ§ª Tests Automatiques Rigoureux</h2>
        
        <div class="feature-box" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
          <h3 style="color: white;">Panneau de ContrÃ´le</h3>
          <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-top: 20px;">
            <button onclick="runAllTests()" style="background: #27ae60; flex: 1;">
              ğŸš€ LANCER TOUS LES TESTS
            </button>
            <button onclick="clearTestLogs()" style="background: #e74c3c; flex: 1;">
              ğŸ—‘ï¸ Effacer
            </button>
            <button onclick="copyLogsToClipboard()" style="background: #f39c12; flex: 1;">
              ğŸ“‹ COPIER LES LOGS
            </button>
          </div>
        </div>

        <div class="feature-box" style="margin-top: 20px;">
          <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
            <h3>ğŸ“Š RÃ©sumÃ©</h3>
            <div style="display: flex; gap: 15px; font-weight: 600;">
              <span style="color: #27ae60;">âœ… <span id="passedCount">0</span></span>
              <span style="color: #e74c3c;">âŒ <span id="failedCount">0</span></span>
              <span style="color: #f39c12;">âš ï¸ <span id="warningCount">0</span></span>
            </div>
          </div>
          
          <div id="testProgress" style="display: none; margin-bottom: 15px;">
            <progress id="testProgressBar" value="0" max="100"></progress>
            <p id="testProgressText" style="text-align: center; margin-top: 5px;"></p>
          </div>
        </div>

        <div class="feature-box" style="margin-top: 20px;">
          <h3>ğŸ“ Logs (Copiez et collez dans Claude)</h3>
          <textarea id="testLogs" readonly></textarea>
          
          <div style="margin-top: 15px; padding: 15px; background: #fff3cd; border-radius: 8px;">
            <strong>ğŸ’¡ Instructions:</strong>
            <ol style="margin: 10px 0 0 20px;">
              <li>Cliquez "ğŸš€ LANCER TOUS LES TESTS"</li>
              <li>Attendez la fin (30-60 secondes)</li>
              <li>Cliquez "ğŸ“‹ COPIER LES LOGS"</li>
              <li>Collez dans Claude pour analyse</li>
            </ol>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    console.log('ğŸš€ Script chargÃ© - Tests prÃªts!');
    
    // SystÃ¨me de tests
    const TestSuite = {
      logs: [],
      results: { passed: 0, failed: 0, warnings: 0, total: 0 },
      startTime: null,
      
      log(message, type = 'info') {
        const timestamp = new Date().toISOString();
        this.logs.push({ timestamp, type, message });
        
        const symbols = {
          pass: 'âœ…', fail: 'âŒ', warn: 'âš ï¸', info: 'â„¹ï¸', start: 'ğŸš€', end: 'ğŸ'
        };
        
        const symbol = symbols[type] || 'â„¹ï¸';
        const line = `[${timestamp}] ${symbol} ${message}\n`;
        
        const textarea = document.getElementById('testLogs');
        textarea.value += line;
        textarea.scrollTop = textarea.scrollHeight;
        console.log(line);
      },
      
      updateSummary() {
        document.getElementById('passedCount').textContent = this.results.passed;
        document.getElementById('failedCount').textContent = this.results.failed;
        document.getElementById('warningCount').textContent = this.results.warnings;
      },
      
      updateProgress(current, total, message) {
        const progress = document.getElementById('testProgress');
        const bar = document.getElementById('testProgressBar');
        const text = document.getElementById('testProgressText');
        
        progress.style.display = 'block';
        bar.value = (current / total) * 100;
        text.textContent = `${message} (${current}/${total})`;
        
        if (current === total) {
          setTimeout(() => progress.style.display = 'none', 2000);
        }
      },
      
      assert(condition, testName, details = '') {
        this.results.total++;
        if (condition) {
          this.results.passed++;
          this.log(`PASS: ${testName}${details ? ' - ' + details : ''}`, 'pass');
        } else {
          this.results.failed++;
          this.log(`FAIL: ${testName}${details ? ' - ' + details : ''}`, 'fail');
        }
      },
      
      warn(message) {
        this.results.warnings++;
        this.log(`WARNING: ${message}`, 'warn');
      }
    };

    // Tests Navigateur
    async function runBrowserTests() {
      TestSuite.log('='.repeat(60), 'start');
      TestSuite.log('TESTS NAVIGATEUR', 'start');
      TestSuite.log('='.repeat(60), 'start');
      
      TestSuite.log(`User Agent: ${navigator.userAgent}`, 'info');
      TestSuite.log(`Langue: ${navigator.language}`, 'info');
      TestSuite.log(`Plateforme: ${navigator.platform}`, 'info');
      
      TestSuite.assert('serviceWorker' in navigator, 'Service Worker');
      TestSuite.assert('geolocation' in navigator, 'Geolocation');
      TestSuite.assert('Notification' in window, 'Notifications');
      TestSuite.assert('localStorage' in window, 'Local Storage');
      TestSuite.assert('sessionStorage' in window, 'Session Storage');
      TestSuite.assert('indexedDB' in window, 'IndexedDB');
      TestSuite.assert('Worker' in window, 'Web Workers');
      TestSuite.assert('WebSocket' in window, 'WebSocket');
      TestSuite.assert('fetch' in window, 'Fetch API');
      TestSuite.assert('Promise' in window, 'Promise');
      
      const canvas = document.createElement('canvas');
      const ctx2d = canvas.getContext('2d');
      const webgl = canvas.getContext('webgl');
      
      TestSuite.assert(!!ctx2d, 'Canvas 2D');
      TestSuite.assert(!!webgl, 'WebGL');
      
      TestSuite.assert('clipboard' in navigator, 'Clipboard API');
      TestSuite.assert('vibrate' in navigator, 'Vibration API');
      
      TestSuite.log('Tests navigateur OK', 'end');
      TestSuite.updateSummary();
    }

    // Tests HTML
    async function runHTMLTests() {
      TestSuite.log('='.repeat(60), 'start');
      TestSuite.log('TESTS HTML', 'start');
      TestSuite.log('='.repeat(60), 'start');
      
      TestSuite.assert(!!document.doctype, 'DOCTYPE prÃ©sent');
      TestSuite.assert(document.documentElement.tagName === 'HTML', '<html> prÃ©sent');
      TestSuite.assert(!!document.head, '<head> prÃ©sent');
      TestSuite.assert(!!document.body, '<body> prÃ©sent');
      
      const charset = document.querySelector('meta[charset]');
      const viewport = document.querySelector('meta[name="viewport"]');
      
      TestSuite.assert(!!charset, 'Meta charset');
      TestSuite.assert(!!viewport, 'Meta viewport');
      
      const header = document.querySelector('header');
      const nav = document.querySelector('nav');
      const main = document.querySelector('main');
      
      TestSuite.assert(!!header, '<header> prÃ©sent');
      TestSuite.assert(!!nav, '<nav> prÃ©sent');
      TestSuite.assert(!!main, '<main> prÃ©sent');
      
      const h1 = document.querySelectorAll('h1');
      TestSuite.assert(h1.length === 1, 'Un seul H1', `TrouvÃ©s: ${h1.length}`);
      
      TestSuite.log('Tests HTML OK', 'end');
      TestSuite.updateSummary();
    }

    // Tests JavaScript
    async function runJSTests() {
      TestSuite.log('='.repeat(60), 'start');
      TestSuite.log('TESTS JAVASCRIPT', 'start');
      TestSuite.log('='.repeat(60), 'start');
      
      TestSuite.assert(typeof Promise !== 'undefined', 'Promise');
      TestSuite.assert(typeof Map !== 'undefined', 'Map');
      TestSuite.assert(typeof Set !== 'undefined', 'Set');
      TestSuite.assert(typeof Symbol !== 'undefined', 'Symbol');
      
      TestSuite.assert(typeof Array.prototype.map === 'function', 'Array.map');
      TestSuite.assert(typeof Array.prototype.filter === 'function', 'Array.filter');
      TestSuite.assert(typeof Array.prototype.reduce === 'function', 'Array.reduce');
      
      const testArray = [1, 2, 3];
      const doubled = testArray.map(x => x * 2);
      TestSuite.assert(doubled.toString() === '2,4,6', 'Array.map fonctionne');
      
      TestSuite.log('Tests JavaScript OK', 'end');
      TestSuite.updateSummary();
    }

    // Tests Performance
    async function runPerformanceTests() {
      TestSuite.log('='.repeat(60), 'start');
      TestSuite.log('TESTS PERFORMANCE', 'start');
      TestSuite.log('='.repeat(60), 'start');
      
      if ('performance' in window) {
        const perfData = performance.getEntriesByType('navigation')[0];
        
        if (perfData) {
          const loadTime = perfData.loadEventEnd - perfData.fetchStart;
          const domReady = perfData.domContentLoadedEventEnd - perfData.fetchStart;
          
          TestSuite.log(`Temps chargement: ${loadTime.toFixed(0)}ms`, 'info');
          TestSuite.log(`DOM Ready: ${domReady.toFixed(0)}ms`, 'info');
          
          TestSuite.assert(loadTime < 5000, 'Chargement < 5s');
          TestSuite.assert(domReady < 3000, 'DOM Ready < 3s');
        }
        
        if (performance.memory) {
          const memUsed = (performance.memory.usedJSHeapSize / 1048576).toFixed(2);
          TestSuite.log(`MÃ©moire: ${memUsed} MB`, 'info');
        }
      }
      
      // Test Canvas
      const canvas = document.createElement('canvas');
      canvas.width = 1000;
      canvas.height = 1000;
      const ctx = canvas.getContext('2d');
      
      const start = performance.now();
      for (let i = 0; i < 1000; i++) {
        ctx.fillRect(Math.random() * 1000, Math.random() * 1000, 10, 10);
      }
      const time = performance.now() - start;
      
      TestSuite.log(`Canvas 1000 rects: ${time.toFixed(2)}ms`, 'info');
      TestSuite.assert(time < 100, 'Performance Canvas OK');
      
      TestSuite.log('Tests Performance OK', 'end');
      TestSuite.updateSummary();
    }

    // Tests SÃ©curitÃ©
    async function runSecurityTests() {
      TestSuite.log('='.repeat(60), 'start');
      TestSuite.log('TESTS SÃ‰CURITÃ‰', 'start');
      TestSuite.log('='.repeat(60), 'start');
      
      const protocol = window.location.protocol;
      TestSuite.log(`Protocole: ${protocol}`, 'info');
      
      TestSuite.assert(
        protocol === 'https:' || protocol === 'file:',
        'Protocole sÃ©curisÃ©'
      );
      
      const externalLinks = Array.from(document.querySelectorAll('a[target="_blank"]'));
      let secureLinks = 0;
      
      externalLinks.forEach(link => {
        const rel = link.getAttribute('rel') || '';
        if (rel.includes('noopener') && rel.includes('noreferrer')) {
          secureLinks++;
        }
      });
      
      if (externalLinks.length > 0) {
        TestSuite.log(`Liens externes: ${externalLinks.length}`, 'info');
        TestSuite.log(`Liens sÃ©curisÃ©s: ${secureLinks}`, 'info');
      }
      
      TestSuite.log('Tests SÃ©curitÃ© OK', 'end');
      TestSuite.updateSummary();
    }

    // Tests AccessibilitÃ©
    async function runAccessibilityTests() {
      TestSuite.log('='.repeat(60), 'start');
      TestSuite.log('TESTS ACCESSIBILITÃ‰', 'start');
      TestSuite.log('='.repeat(60), 'start');
      
      const html = document.documentElement;
      TestSuite.assert(html.hasAttribute('lang'), 'Attribut lang', `Langue: ${html.lang}`);
      
      const buttons = document.querySelectorAll('button');
      let buttonsOK = 0;
      
      buttons.forEach(btn => {
        if (btn.textContent.trim() || btn.getAttribute('aria-label')) {
          buttonsOK++;
        }
      });
      
      TestSuite.assert(buttonsOK === buttons.length, 'Boutons accessibles', `${buttonsOK}/${buttons.length}`);
      
      TestSuite.log('Tests AccessibilitÃ© OK', 'end');
      TestSuite.updateSummary();
    }

    // FONCTION PRINCIPALE
    async function runAllTests() {
      console.log('ğŸš€ DÃ©but des tests...');
      
      TestSuite.results = { passed: 0, failed: 0, warnings: 0, total: 0 };
      TestSuite.logs = [];
      TestSuite.startTime = Date.now();
      
      document.getElementById('testLogs').value = '';
      
      TestSuite.log('â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—', 'start');
      TestSuite.log('â•‘     SUITE DE TESTS AUTOMATIQUES COMPLÃˆTE      â•‘', 'start');
      TestSuite.log('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'start');
      TestSuite.log('', 'info');
      TestSuite.log(`Date: ${new Date().toLocaleString()}`, 'info');
      TestSuite.log(`URL: ${window.location.href}`, 'info');
      TestSuite.log('', 'info');
      
      const tests = [
        { name: 'Navigateur', fn: runBrowserTests },
        { name: 'HTML', fn: runHTMLTests },
        { name: 'JavaScript', fn: runJSTests },
        { name: 'Performance', fn: runPerformanceTests },
        { name: 'SÃ©curitÃ©', fn: runSecurityTests },
        { name: 'AccessibilitÃ©', fn: runAccessibilityTests }
      ];
      
      for (let i = 0; i < tests.length; i++) {
        TestSuite.updateProgress(i + 1, tests.length, `Tests ${tests[i].name}`);
        await tests[i].fn();
        TestSuite.log('', 'info');
        await new Promise(r => setTimeout(r, 100));
      }
      
      const duration = Date.now() - TestSuite.startTime;
      
      TestSuite.log('â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—', 'end');
      TestSuite.log('â•‘              RÃ‰SUMÃ‰ FINAL                      â•‘', 'end');
      TestSuite.log('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'end');
      TestSuite.log('', 'info');
      TestSuite.log(`âœ… RÃ©ussis: ${TestSuite.results.passed}`, 'pass');
      TestSuite.log(`âŒ Ã‰chouÃ©s: ${TestSuite.results.failed}`, 'fail');
      TestSuite.log(`âš ï¸  Warnings: ${TestSuite.results.warnings}`, 'warn');
      TestSuite.log(`â±ï¸  DurÃ©e: ${(duration / 1000).toFixed(2)}s`, 'info');
      
      const rate = ((TestSuite.results.passed / TestSuite.results.total) * 100).toFixed(2);
      TestSuite.log(`ğŸ“ˆ Taux rÃ©ussite: ${rate}%`, 'info');
      TestSuite.log('', 'info');
      TestSuite.log('ğŸ’¡ Cliquez "ğŸ“‹ COPIER LES LOGS" puis collez dans Claude', 'info');
      
      console.log('âœ… Tests terminÃ©s!');
    }

    // Utilitaires
    function clearTestLogs() {
      document.getElementById('testLogs').value = '';
      TestSuite.logs = [];
      TestSuite.results = { passed: 0, failed: 0, warnings: 0, total: 0 };
      TestSuite.updateSummary();
      console.log('ğŸ—‘ï¸ Logs effacÃ©s');
    }
    
    async function copyLogsToClipboard() {
      const logs = document.getElementById('testLogs').value;
      
      if (!logs) {
        alert('âš ï¸ Aucun log Ã  copier! Lancez d\'abord les tests.');
        return;
      }
      
      try {
        await navigator.clipboard.writeText(logs);
        alert('âœ… LOGS COPIÃ‰S!\n\nVous pouvez maintenant les coller dans Claude.');
        console.log('ğŸ“‹ Logs copiÃ©s dans le presse-papier');
      } catch (err) {
        const textarea = document.getElementById('testLogs');
        textarea.select();
        document.execCommand('copy');
        alert('âœ… Logs copiÃ©s! (fallback)');
      }
    }

    // DÃ©sactiver notification au chargement
    window.addEventListener('load', () => {
      console.log('âœ… Page chargÃ©e - PrÃªt pour les tests!');
    });
  </script>
</body>
</html>